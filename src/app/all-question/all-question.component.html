<!-- NAVBAR - Ultimate Premium Design -->
<!-- NAVBAR - Ultimate Premium Design -->
<nav class="navbar">
  <div class="navbar-container">
    <!-- Left Section -->
    <div class="navbar-left">
      <button class="hamburger" (click)="toggleSidebar()" aria-label="Toggle sidebar">
        <span></span>
        <span></span>
        <span></span>
      </button>
      
      <div class="brand-logo">
        <div class="logo-icon">
          <i class="fas fa-rocket"></i>
          <div class="logo-shine"></div>
        </div>
        <div class="logo-text">
          <span class="brand">SIGA</span>
          <span class="brand-sub">Recruitment Excellence</span>
        </div>
      </div>
    </div>

    <!-- Center Search -->
    <form class="search-wrapper" (submit)="$event.preventDefault(); applyFilters()">
      <div class="search-field">
        <i class="fas fa-search search-icon"></i>
        <input
          class="search"
          type="search"
          [(ngModel)]="searchTerm"
          name="search"
          placeholder="Rechercher un candidat par nom, email..."
          aria-label="Search candidates"
        />
        <kbd class="search-shortcut">⌘K</kbd>
      </div>
    </form>
<aside class="sidebar" [class.collapsed]="sidebarCollapsed">
  <div class="sidebar-header">
    <div class="sidebar-brand">
      <div class="brand-icon">
        <i class="fas fa-users-cog"></i>
        <div class="icon-pulse"></div>
      </div>
      <span class="brand-text">SIGA HR</span>
    </div>
    <button class="collapse-toggle" (click)="toggleSidebar()" aria-label="Toggle sidebar">
      <i class="fas" [ngClass]="sidebarCollapsed ? 'fa-chevron-right' : 'fa-chevron-left'"></i>
    </button>
  </div>

 <nav class="sidebar-nav">
  <!-- Main Menu -->
  <div class="nav-section">
    <span class="nav-section-title">Menu Principal</span>

    <a routerLink="/getall" class="nav-link" routerLinkActive="active">
      <div class="nav-icon"><i class="fas fa-chart-line"></i></div>
      <span class="nav-text">Dashboard</span>
      <div class="nav-indicator"></div>
    </a>

    <a routerLink="/recommendation" class="nav-link" routerLinkActive="active">
      <div class="nav-icon"><i class="fas fa-brain"></i></div>
      <span class="nav-text">Analyse CV</span>
      <div class="nav-indicator"></div>
    </a>

    <a routerLink="/HistoriqueCandidat" class="nav-link" routerLinkActive="active">
      <div class="nav-icon"><i class="fas fa-history"></i></div>
      <span class="nav-text">Historique</span>
      <div class="nav-indicator"></div>
    </a>

    <a routerLink="/getCandidats" class="nav-link" routerLinkActive="active">
      <div class="nav-icon"><i class="fas fa-user-friends"></i></div>
      <span class="nav-text">Candidats</span>
      <div class="nav-indicator"></div>
    </a>

    <!-- Menu Question avec sous-menus -->
    <div class="nav-dropdown" [class.open]="questionMenuOpen">
      <div class="nav-link dropdown-toggle" (click)="questionMenuOpen = !questionMenuOpen">
        <div class="nav-icon"><i class="fas fa-question-circle"></i></div>
        <span class="nav-text">Question</span>
        <i class="fas" [ngClass]="questionMenuOpen ? 'fa-chevron-up' : 'fa-chevron-down'" style="margin-left:auto;"></i>
      </div>
      <div class="dropdown-items" *ngIf="questionMenuOpen">
        <a routerLink="/ajouterQuestion" class="nav-sublink" routerLinkActive="active"><span>Ajouter Question</span></a>
        <a routerLink="/getallQuestion" class="nav-sublink" routerLinkActive="active"><span>Liste des Questions</span></a>
      </div>
    </div>
  </div>

  <!-- Management Section -->
  <div class="nav-section">
    <span class="nav-section-title">Gestion</span>
    
    <a routerLink="/Calendrier" class="nav-link" routerLinkActive="active">
      <div class="nav-icon"><i class="fas fa-calendar-check"></i></div>
      <span class="nav-text">Calendrier</span>
      <div class="nav-indicator"></div>
    </a>
    
    <a routerLink="/OfferByAdmin" class="nav-link" routerLinkActive="active">
      <div class="nav-icon"><i class="fas fa-briefcase"></i></div>
      <span class="nav-text">Offres</span>
      <div class="nav-indicator"></div>
    </a>
  </div>

  <!-- Quick Actions -->
  
</nav>

 
</aside>
    <!-- Right Section -->
    <div class="navbar-right">
      <button class="icon-btn notif-btn" title="Notifications" aria-label="Notifications">
        <i class="fas fa-bell"></i>
        <span class="badge-dot"></span>
        <span class="badge-count">3</span>
      </button>
      
      <div class="divider-vertical"></div>
      
      <div class="user-menu">
        <div class="user-avatar">
          <div class="avatar-gradient">
            <span>{{ username.charAt(0).toUpperCase() }}</span>
          </div>
          <div class="status-indicator online"></div>
        </div>
        <div class="user-details">
          <span class="user-greeting">Bonjour,</span>
          <span class="user-name">{{ username }}</span>
        </div>
        <button class="btn-logout" title="Déconnexion" (click)="onLogout()" aria-label="Logout">
          <i class="fas fa-sign-out-alt"></i>
        </button>
      </div>
    </div>
  </div>
  <div class="navbar-glow"></div>
</nav>


<!-- SIDEBAR - Ultimate Premium Design -->
<aside class="sidebar" [class.collapsed]="sidebarCollapsed">
  <div class="sidebar-header">
    <div class="sidebar-brand">
      <div class="brand-icon">
        <i class="fas fa-users-cog"></i>
        <div class="icon-pulse"></div>
      </div>
      <span class="brand-text">SIGA HR</span>
    </div>
    <button class="collapse-toggle" (click)="toggleSidebar()" aria-label="Toggle sidebar">
      <i class="fas" [ngClass]="sidebarCollapsed ? 'fa-chevron-right' : 'fa-chevron-left'"></i>
    </button>
  </div>

  <nav class="sidebar-nav">
    <!-- Main Menu -->
    <div class="nav-section">
      <span class="nav-section-title">Menu Principal</span>

      <a routerLink="/getall" class="nav-link" routerLinkActive="active">
        <div class="nav-icon"><i class="fas fa-chart-line"></i></div>
        <span class="nav-text">Dashboard</span>
        <div class="nav-indicator"></div>
      </a>

      <a routerLink="/recommendation" class="nav-link" routerLinkActive="active">
        <div class="nav-icon"><i class="fas fa-brain"></i></div>
        <span class="nav-text">Analyse CV</span>
        <div class="nav-indicator"></div>
      </a>

      <a routerLink="/HistoriqueCandidat" class="nav-link" routerLinkActive="active">
        <div class="nav-icon"><i class="fas fa-history"></i></div>
        <span class="nav-text">Historique</span>
        <div class="nav-indicator"></div>
      </a>

      <a routerLink="/getCandidats" class="nav-link" routerLinkActive="active">
        <div class="nav-icon"><i class="fas fa-user-friends"></i></div>
        <span class="nav-text">Candidats</span>
        <div class="nav-indicator"></div>
      </a>

      <!-- Menu Question avec Sous-menus -->
      <div class="nav-dropdown" [class.open]="questionMenuOpen">
        <div class="nav-link dropdown-toggle" (click)="questionMenuOpen = !questionMenuOpen">
          <div class="nav-icon"><i class="fas fa-question-circle"></i></div>
          <span class="nav-text">Question</span>
          <i class="fas" [ngClass]="questionMenuOpen ? 'fa-chevron-up' : 'fa-chevron-down'" style="margin-left:auto;"></i>
        </div>

        <div class="dropdown-items" *ngIf="questionMenuOpen">
          <a routerLink="/ajouterQuestion" class="nav-sublink" routerLinkActive="active">
            <span>Ajouter Question</span>
          </a>

          <a routerLink="/getallQuestion" class="nav-sublink" routerLinkActive="active">
            <span>Liste des Questions</span>
          </a>
        </div>
      </div>
    </div>

    <!-- Management Section -->
    <div class="nav-section">
      <span class="nav-section-title">Gestion</span>
      
      <a routerLink="/Calendrier" class="nav-link" routerLinkActive="active">
        <div class="nav-icon">
          <i class="fas fa-calendar-check"></i>
        </div>
        <span class="nav-text">Calendrier</span>
        <div class="nav-indicator"></div>
      </a>
      
      <a routerLink="/OfferByAdmin" class="nav-link" routerLinkActive="active">
        <div class="nav-icon">
          <i class="fas fa-briefcase"></i>
        </div>
        <span class="nav-text">Offres</span>
        <div class="nav-indicator"></div>
      </a>
    </div>
  </nav>

  <div class="sidebar-footer">
    <div class="user-card">
      <div class="user-avatar-small">
        <span>A</span>
        <div class="avatar-ring"></div>
      </div>
      <div class="user-info-small">
        <span class="user-name-small">Admin</span>
        <span class="user-role">Administrateur RH</span>
      </div>
    </div>
    
    <div class="app-version">
      <i class="fas fa-shield-check"></i>
      <span>Version 1.0.0</span>
    </div>
  </div>
</aside>

<!-- MAIN CONTENT -->
<main class="content" [class.expanded]="sidebarCollapsed">
  
  <!-- Page Header -->
  <header class="page-header">
    <div class="header-content">
      <div class="header-title">
        <div class="title-wrapper">
          <h1>Gestion des Questions</h1>
          <div class="title-decoration"></div>
        </div>
        <p class="subtitle">Gérez les questions d'entretien avec facilité et efficacité</p>
      </div>

      <div class="header-actions">
        <button class="btn btn-primary" routerLink="/ajouterQuestion">
          <i class="fas fa-plus"></i>
          <span>Ajouter Question</span>
        </button>
      </div>
    </div>
  </header>

  <!-- Results Summary -->
  <div class="results-summary" *ngIf="filteredQuestions().length > 0">
    <div class="summary-content">
      <i class="fas fa-check-circle"></i>
      <span><strong>{{ filteredQuestions().length }}</strong> question(s) trouvée(s)</span>
      <span class="summary-separator">•</span>
      <span>Total: {{ questions.length }}</span>
    </div>
  </div>

  <!-- Questions Section -->
  <section class="questions-section">
    <div class="section-card">
      <div class="section-header">
        <div class="section-title">
          <i class="fas fa-list-ul"></i>
          <h2>Liste des Questions</h2>
        </div>
        
        <div class="section-actions">
          <div class="search-inline">
            <i class="fas fa-search"></i>
            <input 
              type="text" 
              [(ngModel)]="searchTerm" 
              placeholder="Rechercher une question..."
            />
          </div>
        </div>
      </div>

      <div class="table-wrapper">
        <div class="table-container">
          <table class="data-table">
            <thead>
              <tr>
                <th class="col-id">
                  <div class="th-content">
                    <i class="fas fa-hashtag"></i>
                    <span>ID</span>
                  </div>
                </th>
                <th class="col-question">
                  <div class="th-content">
                    <i class="fas fa-question-circle"></i>
                    <span>Question</span>
                  </div>
                </th>
                <th class="col-actions">
                  <div class="th-content">
                    <i class="fas fa-cog"></i>
                    <span>Actions</span>
                  </div>
                </th>
              </tr>
            </thead>

            <tbody>
              <tr *ngFor="let q of filteredQuestions(); let i = index" [class.even]="i % 2 === 0">
                <td class="col-id">
                  <span class="cell-id">{{ q.idquestion }}</span>
                </td>

                <td class="col-question">
                  <!-- Mode Lecture -->
                  <div class="question-cell" *ngIf="editingQuestionId !== q.idquestion">
                    <span class="question-text">{{ q.question }}</span>
                  </div>

                  <!-- Mode Edition -->
                  <div class="edit-input-wrapper" *ngIf="editingQuestionId === q.idquestion">
                    <input 
                      type="text"
                      class="edit-input"
                      [(ngModel)]="editedQuestionText"
                      placeholder="Entrez la question..."
                      (keyup.enter)="saveEdit(q.idquestion)"
                      (keyup.escape)="cancelEdit()"
                    />
                  </div>
                </td>

                <td class="col-actions">
                  <div class="actions-group">
                    <!-- Boutons Mode Lecture -->
                    <ng-container *ngIf="editingQuestionId !== q.idquestion">
                      <button class="action-btn btn-edit" (click)="editQuestion(q)">
                        <i class="fas fa-edit"></i>
                        <span>Modifier</span>
                      </button>

                      <button class="action-btn btn-delete" (click)="delete(q.idquestion)">
                        <i class="fas fa-trash-alt"></i>
                        <span>Supprimer</span>
                      </button>
                    </ng-container>

                    <!-- Boutons Mode Edition -->
                    <ng-container *ngIf="editingQuestionId === q.idquestion">
                      <button class="action-btn btn-save" (click)="saveEdit(q.idquestion)">
                        <i class="fas fa-check"></i>
                        <span>Enregistrer</span>
                      </button>

                      <button class="action-btn btn-cancel" (click)="cancelEdit()">
                        <i class="fas fa-times"></i>
                        <span>Annuler</span>
                      </button>
                    </ng-container>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </section>

  <!-- Empty State -->
  <div *ngIf="filteredQuestions().length === 0" class="empty-state">
    <div class="empty-icon">
      <i class="fas fa-search"></i>
      <div class="icon-ring"></div>
    </div>
    <h3 class="empty-title">Aucune question trouvée</h3>
    <p class="empty-description">
      Aucun résultat ne correspond à votre recherche.<br>
      Essayez avec d'autres mots-clés ou ajoutez une nouvelle question.
    </p>
    <button class="btn btn-primary" routerLink="/ajouterQuestion">
      <i class="fas fa-plus"></i>
      <span>Ajouter une question</span>
    </button>
  </div>
</main>

