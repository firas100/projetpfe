<!-- NAVBAR -->
<nav class="navbar">
  <div class="navbar-left">
    <button class="hamburger" (click)="toggleSidebar()" aria-label="Toggle sidebar">
      <span></span><span></span><span></span>
    </button>
    <span class="brand">SIGA <small class="brand-sub">Admin</small></span>
  </div>

  <form class="search-wrapper" (submit)="$event.preventDefault(); applyFilter()">
    <div class="search-field">
      <input
        class="search"
        type="search"
        [(ngModel)]="searchTerm"
        name="search"
        placeholder="Recherche: nom, prÃ©nom, email..."
        aria-label="Search candidates"
      />
      <button class="btn btn-search" type="button" (click)="applyFilter()" title="Rechercher">
        <i class="fas fa-search"></i>
      </button>
    </div>
  </form>

  <div class="navbar-right">
    <div class="notif">
      <button class="icon-btn" title="Notifications">
        <i class="fas fa-bell"></i>
      </button>
    </div>

    <div class="user">
      <div class="user-info">
        <div class="user-emoji">ğŸ‘‹</div>
        <div class="user-text">
          <div class="user-hi">Bienvenue</div>
          <div class="user-name">{{ username }}</div>
        </div>
      </div>
      <button class="btn-logout" title="DÃ©connexion" (click)="onLogout()">
        <i class="fas fa-sign-out-alt"></i>
      </button>
    </div>
  </div>
</nav>

<!-- SIDEBAR -->
<aside class="sidebar" [class.collapsed]="sidebarCollapsed">
  <div class="sidebar-top">
    <div class="brand">
      <i class="fas fa-rocket"></i>
      <span>SIGA</span>
    </div>
    <button class="collapse-btn" (click)="toggleSidebar()" title="Toggle Sidebar">
      <i class="fas" [ngClass]="sidebarCollapsed ? 'fa-angle-right' : 'fa-angle-left'"></i>
    </button>
  </div>

  <nav class="nav-links">
    <a routerLink="/getall" routerLinkActive="active"><i class="fas fa-tachometer-alt"></i><span class="link-text">Dashboard</span></a>
    <a routerLink="/recommendation" routerLinkActive="active"><i class="fas fa-file-alt"></i><span class="link-text">Analyse CV</span></a>
    <a routerLink="/getCandidats" routerLinkActive="active"><i class="fas fa-users"></i><span class="link-text">Candidats</span></a>
    <a routerLink="/Calendrier" routerLinkActive="active"><i class="fas fa-calendar-alt"></i><span class="link-text">Calendrier</span></a>
    <a routerLink="/OfferByAdmin" routerLinkActive="active">
      <i class="fas fa-briefcase"></i><span class="link-text">Gestion Offres</span>
    </a>
  </nav>

  <div class="sidebar-bottom">
    <div class="user-profile">
      <div class="avatar">ğŸ‘‹</div>
      <div class="user-info">
        <span class="name">Admin</span>
        <small class="role">Super Admin</small>
      </div>
    </div>
    <small class="version">v1.0 â€¢ SIGA</small>
  </div>
</aside>

<!-- MAIN -->
<main class="main-content" [class.expanded]="sidebarCollapsed">
  <div class="container">
    <header class="content-header">
      <div>
        <h1>Entretiens PlanifiÃ©s</h1>
        <p class="muted">GÃ©rez vos entretiens avec une interface Ã©lÃ©gante et intuitive.</p>
      </div>
      <div class="filter-wrapper">
        <input
          class="search-input"
          type="search"
          [(ngModel)]="searchTerm"
          (input)="applyFilter()"
          placeholder="Rechercher par nom, email..."
          aria-label="Search interviews"
        />
        <label class="select-wrap">
          <select
            id="statusFilter"
            class="custom-select"
            [(ngModel)]="selectedStatus"
            (change)="filterByStatus()"
          >
            <option value="">Tous les statuts</option>
            <option value="CONFIRME">ConfirmÃ©</option>
            <option value="REFUSE">RefusÃ©</option>
            <option value="EN_ATTENTE">En attente</option>
          </select>
        </label>
      </div>
    </header>

    <section class="entretien-grid">
      <article *ngFor="let entretien of paginatedEntretiens" class="entretien-card"
        [ngClass]="{
          'status-confirme': entretien.status === 'CONFIRME',
          'status-refuse': entretien.status === 'REFUSE',
          'status-en-attente': entretien.status === 'EN_ATTENTE'
        }">
        <div class="card-content">
          <div class="candidate-info">
            <div class="avatar" [style.background]="avatarColor(entretien.candidat)">{{ initials(entretien.candidat) }}</div>
            <div class="meta">
              <div class="name">{{ entretien.candidat.prenom }} <span class="lastname">{{ entretien.candidat.nom }}</span></div>
              <div class="sub muted">
                <i class="fas fa-envelope"></i> {{ entretien.candidat.email }}
              </div>
            </div>
          </div>
          <div class="details">
            <div class="detail-item">
              <span class="label">Date</span>
              <span>{{ entretien.dateEntretien | date:'mediumDate' }}</span>
            </div>
            <div class="detail-item">
              <span class="label">Statut</span>
              <span class="badge"
                [ngClass]="{
                  'badge-confirme': entretien.status === 'CONFIRME',
                  'badge-refuse': entretien.status === 'REFUSE',
                  'badge-en-attente': entretien.status === 'EN_ATTENTE'
                }">
                {{ entretien.status }}
              </span>
            </div>
            <div class="detail-item">
              <span class="label">Commentaire</span>
              <span>{{ entretien.commentaire || 'Aucun' }}</span>
            </div>
            <div class="detail-item">
              <span class="label">Manager</span>
              <span>{{ entretien.managerName }}</span>
            </div>
          </div>
        </div>
      </article>

      <!-- Empty state -->
      <div *ngIf="paginatedEntretiens.length === 0" class="empty">
        <div class="empty-ico">ğŸŒŸ</div>
        <div class="empty-title">Aucun entretien trouvÃ©</div>
        <div class="empty-text">Ajustez vos filtres ou planifiez de nouveaux entretiens pour dÃ©couvrir des sessions.</div>
        <button class="empty-btn" (click)="scheduleNewInterview()">Planifier un entretien</button>
      </div>
    </section>

    <!-- Pagination -->
    <nav aria-label="Pagination" class="pagination-wrap">
      <ul class="pagination justify-content-center pagination-custom">
        <li class="page-item" [class.disabled]="currentPage === 1">
          <button class="page-link" (click)="prevPage()" [disabled]="currentPage === 1">
            <i class="fas fa-chevron-left"></i>
          </button>
        </li>
        <li class="page-item page-info disabled">
          <span class="page-link">{{ currentPage }} / {{ totalPages }}</span>
        </li>
        <li class="page-item" [class.disabled]="currentPage === totalPages">
          <button class="page-link" (click)="nextPage()" [disabled]="currentPage === totalPages">
            <i class="fas fa-chevron-right"></i>
          </button>
        </li>
      </ul>
    </nav>
  </div>
</main>

<!-- FOOTER -->
<footer class="footer">
  <div class="footer-left">
    <div class="brand-info">
      <strong>SIGA</strong>
      <span>â€¢ 13 Rue Ibn Nafis, Les berges du Lac 3, Tunis</span>
    </div>
    <div class="footer-links">
      <a href="mailto:contact&#64;siga.com.tn"><i class="fas fa-envelope"></i> contact&#64;siga.com.tn</a>
      <span>â€¢</span>
      <a href="tel:+21671960281"><i class="fas fa-phone"></i> (+216) 71 960 281</a>
    </div>
  </div>

  <div class="footer-right">
    <span>v1.0</span>
    <a href="#">Privacy</a>
    <a href="#">Terms</a>
  </div>
</footer>